# æ¢æ‰‹ç‡æ•°æ®æ›´æ–°æŒ‡å—

## ğŸ“Š å½“å‰çŠ¶æ€

æ•°æ®åº“ä¸­å·²æ·»åŠ  `turnover` å­—æ®µç”¨äºå­˜å‚¨æ¢æ‰‹ç‡æ•°æ®ã€‚

- **æ€»è®°å½•æ•°**: 1,049,388 æ¡
- **å·²æœ‰æ¢æ‰‹ç‡**: 8,473 æ¡ (0.8%)
- **æ•°æ®æ¥æº**: AKShareï¼ˆå…è´¹æ¥å£ï¼‰

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. æŸ¥çœ‹æ›´æ–°çŠ¶æ€

```bash
# æŸ¥çœ‹æ¢æ‰‹ç‡è¦†ç›–ç‡
python scripts/update_turnover_rate_batch.py --status
```

### 2. æ›´æ–°æœ€è¿‘30å¤©çš„æ•°æ®ï¼ˆæ¨èï¼‰

```bash
# æ›´æ–°æœ€è¿‘30å¤©ï¼ˆé»˜è®¤ï¼‰
python scripts/update_turnover_rate_batch.py --days 30

# æ›´æ–°æœ€è¿‘90å¤©
python scripts/update_turnover_rate_batch.py --days 90

# æ›´æ–°æœ€è¿‘1å¹´
python scripts/update_turnover_rate_batch.py --days 365
```

### 3. æ›´æ–°å…¨éƒ¨å†å²æ•°æ®

```bash
# æ›´æ–°æ‰€æœ‰æ•°æ®ï¼ˆè€—æ—¶å¾ˆé•¿ï¼Œå¯èƒ½éœ€è¦æ•°å°æ—¶ï¼‰
python scripts/update_turnover_rate.py --mode all

# åªæ›´æ–°ç¼ºå¤±çš„æ•°æ®
python scripts/update_turnover_rate.py --mode missing
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### APIé¢‘ç‡é™åˆ¶

AKShare API å­˜åœ¨é¢‘ç‡é™åˆ¶ï¼Œé¢‘ç¹è°ƒç”¨å¯èƒ½å¯¼è‡´ï¼š
- è¿æ¥è¶…æ—¶
- ProxyError
- æ•°æ®è·å–å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
- âœ… ä½¿ç”¨ä¼˜åŒ–ç‰ˆè„šæœ¬ï¼ˆ`update_turnover_rate_batch.py`ï¼‰
- âœ… åˆ†æ‰¹æ›´æ–°ï¼Œé¿å…ä¸€æ¬¡æ€§æ›´æ–°å…¨éƒ¨æ•°æ®
- âœ… åªæ›´æ–°éœ€è¦çš„æ—¶é—´èŒƒå›´
- âœ… è„šæœ¬å†…ç½®äº†é‡è¯•å’Œæš‚åœæœºåˆ¶

### æ›´æ–°ç­–ç•¥

**æ¨èç­–ç•¥ï¼š**
1. **é¦–æ¬¡ä½¿ç”¨**ï¼šæ›´æ–°æœ€è¿‘1å¹´çš„æ•°æ®
   ```bash
   python scripts/update_turnover_rate_batch.py --days 365
   ```

2. **æ—¥å¸¸ç»´æŠ¤**ï¼šæ¯å¤©æ›´æ–°æœ€è¿‘æ•°æ®
   ```bash
   python scripts/update_turnover_rate_batch.py --days 7
   ```

3. **å®šæœŸè¡¥å……**ï¼šæ¯æœˆæ›´æ–°ä¸€æ¬¡æœ€è¿‘æ•°æ®
   ```bash
   python scripts/update_turnover_rate_batch.py --days 90
   ```

## ğŸ“ˆ æ¢æ‰‹ç‡å­—æ®µè¯´æ˜

### å­—æ®µä¿¡æ¯

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| turnover | REAL | æ¢æ‰‹ç‡ç™¾åˆ†æ¯”ï¼ˆå¦‚ 2.5 è¡¨ç¤º 2.5%ï¼‰ |

### æ•°æ®æ¥æº

- **AKShare**: æä¾› `æ¢æ‰‹ç‡` å­—æ®µ
- **Tushare**: ä¸æä¾›æ¢æ‰‹ç‡å­—æ®µ

### æ•°æ®å«ä¹‰

æ¢æ‰‹ç‡ = ï¼ˆæˆäº¤é‡ / æµé€šè‚¡æœ¬ï¼‰Ã— 100%

åæ˜ è‚¡ç¥¨çš„æ´»è·ƒç¨‹åº¦ï¼š
- **< 1%**: äº¤æ˜“æ¸…æ·¡
- **1-3%**: äº¤æ˜“æ­£å¸¸
- **3-5%**: äº¤æ˜“æ´»è·ƒ
- **5-10%**: äº¤æ˜“éå¸¸æ´»è·ƒ
- **\> 10%**: å¯èƒ½å­˜åœ¨ç‚’ä½œ

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### æ‰¹é‡æ›´æ–°

```bash
# ä¸€æ¬¡æ€§æ›´æ–°å¤šæ”¯è‚¡ç¥¨çš„æ¢æ‰‹ç‡
# è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
```

### åå°è¿è¡Œ

```bash
# ä½¿ç”¨ nohup åœ¨åå°è¿è¡Œ
nohup python scripts/update_turnover_rate_batch.py --days 365 > update.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f update.log
```

## ğŸ“ éªŒè¯æ•°æ®

### SQLæŸ¥è¯¢éªŒè¯

```sql
-- æŸ¥çœ‹æ¢æ‰‹ç‡æœ€é«˜çš„è‚¡ç¥¨
SELECT symbol, datetime, turnover
FROM bars
WHERE turnover IS NOT NULL
ORDER BY turnover DESC
LIMIT 20;

-- æŸ¥çœ‹æŸåªè‚¡ç¥¨çš„æ¢æ‰‹ç‡
SELECT datetime, turnover
FROM bars
WHERE symbol = '600382'
  AND turnover IS NOT NULL
ORDER BY datetime DESC
LIMIT 30;

-- ç»Ÿè®¡æ¢æ‰‹ç‡è¦†ç›–ç‡
SELECT
    COUNT(*) as total,
    COUNT(CASE WHEN turnover IS NOT NULL THEN 1 END) as has_turnover,
    CAST(COUNT(CASE WHEN turnover IS NOT NULL THEN 1 END) AS FLOAT) / COUNT(*) * 100 as coverage_rate
FROM bars;
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡è¿è¡Œ**ï¼šæ›´æ–°æœ€è¿‘1å¹´æ•°æ®å³å¯æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚
2. **å®šæœŸæ›´æ–°**ï¼šå»ºè®®æ¯å¤©æˆ–æ¯å‘¨æ›´æ–°ä¸€æ¬¡æœ€æ–°æ•°æ®
3. **æŒ‰éœ€æŸ¥è¯¢**ï¼šä¸éœ€è¦ä¸€æ¬¡æ€§æ›´æ–°å…¨éƒ¨å†å²æ•°æ®
4. **ç›‘æ§è¦†ç›–**ï¼šä½¿ç”¨ `--status` å‚æ•°å®šæœŸæ£€æŸ¥è¦†ç›–ç‡

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `scripts/update_turnover_rate.py` - å®Œæ•´æ›´æ–°è„šæœ¬ï¼ˆæ”¯æŒå…¨é‡/å¢é‡ï¼‰
- `scripts/update_turnover_rate_batch.py` - ä¼˜åŒ–ç‰ˆè„šæœ¬ï¼ˆæ¨èä½¿ç”¨ï¼‰
- `src/utils/data_standardize.py` - æ•°æ®æ ‡å‡†åŒ–å·¥å…·

## ğŸ¯ Webç•Œé¢ä½¿ç”¨

æ›´æ–°æ¢æ‰‹ç‡æ•°æ®åï¼ŒWebç•Œé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼š

1. **æŸ¥è¯¢ç»“æœè¡¨æ ¼**ï¼šæ˜¾ç¤º"æ¢æ‰‹ç‡(%)"åˆ—
2. **æ•°æ®å¯¼å‡º**ï¼šCSV/Excelæ–‡ä»¶åŒ…å«æ¢æ‰‹ç‡æ•°æ®
3. **æ’åºç­›é€‰**ï¼šå¯æŒ‰æ¢æ‰‹ç‡æ’åºç­›é€‰é«˜æ´»è·ƒåº¦è‚¡ç¥¨

åˆ·æ–°æµè§ˆå™¨é¡µé¢å³å¯çœ‹åˆ°æ¢æ‰‹ç‡æ•°æ®ï¼
